"use strict";const e="'([^']+)'|\"([^\"]+)\"|[\\w\\s-]+";RegExp("(bold|bolder|lighter|[1-9]00) +","i"),RegExp("(italic|oblique) +","i"),RegExp("(small-caps) +","i"),RegExp("(ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded) +","i"),RegExp(`([\\d\\.]+)(px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q) *((?:${e})( *, *(?:${e}))*)`);const t=new class{getContext2d(e,t){}resizeImage(e,t,r){let n;if("undefined"==typeof window){let e=Object.assign(document.createElement("canvas"),{width:t,height:r});n=e.getContext("2d")}else{let i=document.createElement("canvas");i.width=t,i.height=r,e.crossOrigin="Anonymous",n=i.getContext("2d")}return n.webkitImageSmoothingEnabled=!0,n.msImageSmoothingEnabled=!0,n.mozImageSmoothingEnabled=!0,n.imageSmoothingEnabled=!0,n.imageSmoothingQuality="high",n.drawImage(e,0,0,t,r),n.getImageData(0,0,t,r).data}},r=new class{convert(e){let t=new Uint8ClampedArray(e.length/4),r=0;for(let n=0;n<e.length;n+=4)t[r++]=Math.round(299*e[n]/1e3+587*e[n+1]/1e3+114*e[n+2]/1e3);return t}};class n{binArray;constructor(e){this.binArray=e}static fromBase64(e){let t=atob(e),r=new Uint8ClampedArray(8*t.length);for(let e=0;e<t.length;e++){let n=t.charCodeAt(e);r[8*e]=1&n,r[8*e+1]=(2&n)>>1,r[8*e+2]=(4&n)>>2,r[8*e+3]=(8&n)>>3,r[8*e+4]=(16&n)>>4,r[8*e+5]=(32&n)>>5,r[8*e+6]=(64&n)>>6,r[8*e+7]=(128&n)>>7}return new n(r)}static fromHexStringReversed(e){let t=new Uint8ClampedArray(4*e.length);for(let r=0;r<e.length;r+=2){let n=Number.parseInt(e.slice(r,r+2),16);t[4*r]=(128&n)>>7,t[4*r+1]=(64&n)>>6,t[4*r+2]=(32&n)>>5,t[4*r+3]=(16&n)>>4,t[4*r+4]=(8&n)>>3,t[4*r+5]=(4&n)>>2,t[4*r+6]=(2&n)>>1,t[4*r+7]=1&n}return new n(t)}static fromHexString(e){let t=new Uint8ClampedArray(4*e.length);for(let r=0;r<e.length;r+=2){let n=Number.parseInt(e.slice(r,r+2),16);t[4*r]=1&n,t[4*r+1]=(2&n)>>1,t[4*r+2]=(4&n)>>2,t[4*r+3]=(8&n)>>3,t[4*r+4]=(16&n)>>4,t[4*r+5]=(32&n)>>5,t[4*r+6]=(64&n)>>6,t[4*r+7]=(128&n)>>7}return new n(t)}toHexStringReversed(){let e="";for(let t=0;t<this.binArray.length;t+=8){let r=this.binArray[t]<<7|this.binArray[t+1]<<6|this.binArray[t+2]<<5|this.binArray[t+3]<<4|this.binArray[t+4]<<3|this.binArray[t+5]<<2|this.binArray[t+6]<<1|this.binArray[t+7];e+=r.toString(16).padStart(2,"0")}return e}toHexString(){let e="";for(let t=0;t<this.binArray.length;t+=8){let r=this.binArray[t]|this.binArray[t+1]<<1|this.binArray[t+2]<<2|this.binArray[t+3]<<3|this.binArray[t+4]<<4|this.binArray[t+5]<<5|this.binArray[t+6]<<6|this.binArray[t+7]<<7;e+=r.toString(16).padStart(2,"0")}return e}toBase64(){let e=[];for(let t=0;t<this.binArray.length;t+=8)e.push(this.binArray[t]|this.binArray[t+1]<<1|this.binArray[t+2]<<2|this.binArray[t+3]<<3|this.binArray[t+4]<<4|this.binArray[t+5]<<5|this.binArray[t+6]<<6|this.binArray[t+7]<<7);return btoa(String.fromCharCode(...new Uint8Array(e)))}hammingDistance(e){if(e.binArray.length!==this.binArray.length)throw Error("Cannot compare two ImageHash instances of different sizes");let t=0;for(let r=0;r<this.binArray.length;r++)this.binArray[r]!==e.binArray[r]&&(t+=1);return t}}window.ahash=function(e,i=8){let a=r.convert(t.resizeImage(e,i,i)),l=new Uint8ClampedArray(i*i),o=0;for(let e=0;e<a.length;e++)o+=a[e];let s=o/a.length;for(let e=0;e<a.length;e++)l[e]=a[e]>s;return new n(l)},window.dhash=function(e,i=8){let a=r.convert(t.resizeImage(e,i+1,i)),l=new Uint8ClampedArray(i*i),o=i+1,s=0;for(let e=0;e<i;e++)for(let t=1;t<o;t++)l[s++]=a[e*o+t]>a[e*o+t-1];return new n(l)},window.phash=function(e,i=8,a=4){let l=i*a,o=r.convert(t.resizeImage(e,l,l)),s=function(e){let t=Math.round(Math.sqrt(e.length)),r=Math.PI/(2*t),n=new Float64Array(t*t);for(let i=0;i<t;i++)for(let a=0;a<t;a++){let l=0,o=i*r,s=a*r;for(let r=0;r<t;r++)for(let n=0;n<t;n++)l+=e[r*t+n]*Math.cos((2*r+1)*o)*Math.cos((2*n+1)*s);n[i*t+a]=l}return n}(o),h=new Float64Array(i*i),g=new Float64Array(i*i),d=0,m=0;for(let e=0;e<i;e++){for(let e=0;e<i;e++)h[d]=s[m],g[d]=s[m],d+=1,m+=1;m+=l-i}for(let e=0;e<h.length;e++)h[e];let y=(g.sort((e,t)=>e-t),g[Math.floor(g.length/2)]),b=new Uint8ClampedArray(i*i);for(let e=0;e<b.length;++e)b[e]=h[e]>y;return new n(b)},window.ImageHash=n;